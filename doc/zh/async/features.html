<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>Async 功能列表</title>
		<link rel="stylesheet" type="text/css" href="../../stylesheets/default.css" />
		<link rel="stylesheet" type="text/css" href="../../stylesheets/shCore.css" />
		<link rel="stylesheet" type="text/css" href="../../stylesheets/shThemeDefault.css" />
		<script type="text/javascript" src="../../javascripts/xregexp.js"></script>
		<script type="text/javascript" src="../../javascripts/shCore.js"></script>
		<script type="text/javascript" src="../../javascripts/shBrushJScript.js"></script>
		<script type="text/javascript" src="../../javascripts/page.js"></script>
	</head>
<body>
    <div id="index" class="collapsed">
        <a id="toggle" href="###" onclick="window.toggleTreeVisibility()">Show Index</a>
        <ul><li><a href="#Async 功能列表">Async 功能列表</a><ul><li><a href="#Async.Operation">Async.Operation</a><ul><li><a href="#Async.Operation.result">Async.Operation.result</a></li><li><a href="#Async.Operation.state">Async.Operation.state</a></li><li><a href="#Async.Operation.completed">Async.Operation.completed</a></li><li><a href="#Async.Operation.yield()">Async.Operation.yield()</a></li><li><a href="#Async.Operation.addCallback()">Async.Operation.addCallback()</a></li></ul></li><li><a href="#Async.chain()">Async.chain()</a><ul><li><a href="#Async.chain().result">Async.chain().result</a></li><li><a href="#Async.chain().state">Async.chain().state</a></li><li><a href="#Async.chain().completed">Async.chain().completed</a></li><li><a href="#Async.chain().next()">Async.chain().next()</a></li><li><a href="#Async.chain().go()">Async.chain().go()</a></li><li><a href="#Async.chain().wait()">Async.chain().wait()</a></li></ul></li><li><a href="#Helpers">Helpers</a><ul><li><a href="#Async.go()">Async.go()</a></li><li><a href="#Async.collect()">Async.collect()</a></li><li><a href="#Async.wait()">Async.wait()</a></li><li><a href="#Async.instant()">Async.instant()</a></li><li><a href="#Function.prototype.asyncCall()">Function.prototype.asyncCall()</a></li><li><a href="#Function.prototype.asyncApply()">Function.prototype.asyncApply()</a></li></ul></li></ul></li></ul>
    </div>
    <div id="content">
        <h1><a name="Async 功能列表">Async 功能列表</a></h1>

<p>Async 是一个用于统一 JavaScript 异步编程模式的组件，通过让异步函数统一返回 Async.Operation 使得异步函数不再需要自行处理异步回调，其详细设计目标及实现机制请参考系列文章《写个 JavaScript 异步调用框架 (Part <a href="http://www.cnblogs.com/cathsfz/archive/2009/05/06/1450332.html">1</a>, <a href="http://www.cnblogs.com/cathsfz/archive/2009/05/07/1451200.html">2</a>, <a href="http://www.cnblogs.com/cathsfz/archive/2009/05/07/1451937.html">3</a>, <a href="http://www.cnblogs.com/cathsfz/archive/2009/05/09/1452875.html">4</a>, <a href="http://www.cnblogs.com/cathsfz/archive/2009/06/30/1514339.html">5</a>, <a href="http://www.cnblogs.com/cathsfz/archive/2009/07/01/1514983.html">6</a>)》，本文仅用作面向开发者用户的说明文档。</p>

<h2><a name="Async.Operation">Async.Operation</a></h2>

<p>表示异步操作的类，异步函数在每次调用时都应该实例化该类的一个新实例。</p>

<pre><code class="brush: js">/* jQuery required for this sample */

var getAsync = function(url, data) {
    var operation = new Async.Operation();
    $.get(url, data, function(result) { operation.yield(result); }, "json");
    return operation;
};

var getOperation = getAsync("/ping", "")
getOperation.addCallback(function(result) { alert("ping returns: " + result); });
</code></pre>

<h3><a name="Async.Operation.result">Async.Operation.result</a></h3>

<ul>
<li>type: instance</li>
</ul>

<p>异步操作的结果。在 yield 执行之前，值一直为 undefined 。在 yield 执行之后，值为 yield 传入的值。</p>

<h3><a name="Async.Operation.state">Async.Operation.state</a></h3>

<ul>
<li>type: instance</li>
</ul>

<p>异步操作的状态。在 yield 执行之前，状态一直为 "running" 。在 yield 执行之后，状态为 "completed" 。</p>

<h3><a name="Async.Operation.completed">Async.Operation.completed</a></h3>

<ul>
<li>type: instance</li>
</ul>

<p>异步操作是否已完成。在 yield 执行之前，已完成标志位一直为 false 。在 yield 执行之后，已完成标志位一直为 true 。</p>

<h3><a name="Async.Operation.yield()">Async.Operation.yield()</a></h3>

<ul>
<li>type: instance</li>
<li>input:
<ul><li>value (optional)</li></ul></li>
<li>output: this : Operation</li>
</ul>

<p>为特定的异步操作返回结果。</p>

<pre><code class="brush: js">var waitAsync = function(delay) {
    var operation = new Async.Operation();
    setTimeout(function() {
        var result = "You have waited " + delay + " millisecond(s)."
        operation.yield(result);
    }, delay);
    return operation;
}
</code></pre>

<h3><a name="Async.Operation.addCallback()">Async.Operation.addCallback()</a></h3>

<ul>
<li>type: instance</li>
<